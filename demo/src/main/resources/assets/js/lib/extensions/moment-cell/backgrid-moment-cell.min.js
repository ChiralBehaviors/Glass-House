/*
  backgrid-moment-cell
  http://github.com/wyuenho/backgrid

  Copyright (c) 2013 Jimmy Yuen Ho Wong
  Licensed under the MIT @license.
*/
(function(t,a,e,i,o){var l=i.Extension.MomentFormatter=function(t){a.extend(this,this.defaults,t)};l.prototype=new i.CellFormatter,a.extend(l.prototype,{defaults:{modelInUTC:!0,modelLang:o.lang(),modelFormat:o.defaultFormat,displayInUTC:!0,displayLang:o.lang(),displayFormat:o.defaultFormat},fromRaw:function(t){var a;if(this.modelLang){var e=o.lang();o.lang(this.modelLang),a=this.modelInUTC?o.utc(t,this.modelFormat):o(t,this.modelFormat),o.lang(e)}else a=this.modelInUTC?o.utc(t,this.modelFormat):o(t,this.modelFormat);return this.displayLang&&a.lang(this.displayLang),this.displayInUTC?a.utc():a.local(),a.format(this.displayFormat)},toRaw:function(t){var a;if(this.displayLang){var e=o.lang();o.lang(this.displayLang),a=this.displayInUTC?o.utc(t,this.displayFormat):o(t,this.displayFormat),o.lang(e)}else a=this.displayInUTC?o.utc(t,this.displayFormat):o(t,this.displayFormat);if(a&&a.isValid())return this.modelLang&&a.lang(this.modelLang),this.modelInUTC?a.utc():a.local(),a.format(this.modelFormat)}});var s=i.Extension.MomentCell=i.Cell.extend({editor:i.InputCellEditor,className:"moment-cell",formatter:l,initialize:function(t){i.Cell.prototype.initialize.apply(this,arguments);var e=l.prototype.defaults,o=a.keys(e),s=a.pick(this,o),n=a.pick(t,o);this.formatter=new this.formatter(a.extend({},e,s,n)),this.editor=this.editor.extend({attributes:a.extend({},this.editor.prototype.attributes||this.editor.attributes||{},{placeholder:this.formatter.displayFormat})})}});a.extend(s.prototype,l.prototype.defaults)})(jQuery,_,Backbone,Backgrid,moment);